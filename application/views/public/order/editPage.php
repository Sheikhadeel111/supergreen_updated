<style type="text/css">
.qtybtn{
position: absolute;
top: 170px;
left: 67px;
}
.qtybtn{
position: absolute;
top: 170px;
left: 67px;
}
.sczrbtn{
		display: block;
		position: absolute;
		top: 186px;
    left: 97px;
	}
	.btn-circle-top{
      color:white;
    background-color: #e5acbc;
    padding: 0px;
    text-align: center;
    font-size: 12px;
    line-height: 1.42857;
    border:none;
    padding:5px;
  }
  .inbtn{
		display: block;
		position: absolute;
		top: 193px;
		left: 55px;
	}

.active{
		background-color: #189271 !important;
	}
.counter{
width: 10px;
background: transparent;
border: none;
}
body{

}
.items{
max-height: 630px;

}

.hidden{
display: none;
}
.animate{
overflow-y: hidden;
max-height: 500px; /* approximate max height */

transition-property: all;
transition-duration: .5s;
transition-timing-function: cubic-bezier(0, 1, 0.5, 1);
}
.btn-circle {
	    color:white;
	    background-color: #e5acbc;
	    width: 30px;
	    height: 30px;
	    padding: 6px 0px;
	    text-align: center;
	    font-size: 12px;
	    line-height: 1.42857;
	    border:none;
	    outline:none !important;
	  }
	   .otherbtn{
	    width: 67px !important;
	    height: 67px !important;
	    border-radius: 100% !important;
	    font-size: 10px !important;
	     outline:none !important;
  		}	

	  .otherbtn:hover{
	    background-color: #189271 !important;
	  }

   .ci_dressing{
   		height: 220px!important;
    	max-width: 220px!important;
  	}
.hovicon_small{
display: grid;
align-items: center;
text-align: center;
margin-right: 0px;
width: 150px;
height: 150px;
border-radius: 50%;
border: 4px solid #ffff;
align-items: center;
cursor: pointer;
position: relative;
}
.overly{
position: absolute;
background: rgba(0,0,0,0.7);
height: 100%;
width: 100%;
}
.overDiv{
vertical-align: middle;

}
.dotted_hovicon{
border: 4px dotted #fff;
}
.border_curve{
border-radius: 100%/149px 149px 0 0;
margin-top: 7px;

}
.btm-center{
bottom: 0;
position: fixed;
}
.vl {
border-left: 4px solid #fff;
height: 35px;
}
.colorgraph {
height: 5px;
border-top: 0;
background: #c4e17f;
border-radius: 5px;
background-image: -webkit-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
background-image: -moz-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
background-image: -o-linear-gradient(left, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
background-image: linear-gradient(to right, #c4e17f, #c4e17f 12.5%, #f7fdca 12.5%, #f7fdca 25%, #fecf71 25%, #fecf71 37.5%, #f0776c 37.5%, #f0776c 50%, #db9dbe 50%, #db9dbe 62.5%, #c49cde 62.5%, #c49cde 75%, #669ae1 75%, #669ae1 87.5%, #62c2e4 87.5%, #62c2e4);
</style>
<style type="text/css">
body { 
	background: url('assets/images/background2.png') no-repeat center center fixed; 
	-webkit-background-size: cover;
	-moz-background-size: cover;
	-o-background-size: cover;
	background-size: cover;
	background-color: rgba(48,194,131,0.5019607843137255);

}
.center-text{
	color: white;
	font-size: 42px;
	font-weight: bold;			
}
	.circles {
width: 315px;
height: 315px;
border-radius: 224px;
margin-left: 43px;
background-color: rgba(48,194,131,0.5019607843137255);
border: 5px solid #ffffff;
}
.textstyle {
	color: white;
	font-size: 34px;
	font-weight: bold;
	margin-top: 111px;
}
.inside-text{
	font-size: 17px;
	color: white;

}
.float-right{
	float: right !important;
}
a:focus, a:hover{
	text-decoration: none;
}

.bottom-button{
			background-color: #e5acbc;
		border: 2px solid #e5acbc;
		padding: 10px 30px !important;
		border-radius: 3px;
		margin-right: 18px;
		font-size: 15px!important;
		font-weight: 400!important;
		text-transform: capitalize!important;
		width:156px;
		color:white !important;
		outline:none !important;
		}
.bottom-button:hover{
	background-color: #F292AE;
	border: 2px solid #F292AE;
}
.card{
	background-color: white;
	margin-left: 53px;
	margin-right: 53px;
	border-radius: 3px;
	padding-top: 12px;
	padding-left: 12px;
	padding-right: 12px;
	padding-bottom: 36px;
	display: none;
	overflow-x: hidden;
	overflow-y: auto;
	height: 693px
}
.card-title{
	text-align: center;
	font-weight: bold;
}
.width-20{
	width: 20%;
	text-align: center;
}
.round-border:hover {
	border: 1px solid #4db68a;
}
.round-border:hover .plus-minus{
	display: block;
}
.round-border{
	padding-top: 9px;
	border-radius: 109px;
	height: 205px;
	width: 205px;
}
.span-text{
	color:#4db68a;
	font-weight: bold;
	font-size: 17px;
}
.glyphicon-plus{
	background-color: #4db68a;
	padding: 5px 6px 6px 7px;
	color: white;
	font-weight: bold;
	cursor: pointer;
}

.glyphicon-minus{
	background-color: #4db68a;
	padding: 5px 6px 6px 7px;
	color: white;
	font-weight: bold;
	cursor: pointer;
}
.plus-minus{
	display: none;
}
.custom-height{
	height: 153px;
}
.show{
	display: block;
}
.custom_margin{
	margin-left: 50px;
	margin-right: 50px;
}
.mt20{
	margin-top: 20px!important;
}
.menu_text{
	padding-top: 3px !important;
}
.extracls{
  position: absolute !important;
    top: 71px !important;
    left: 195px !important;
}
.mediumcls{
  position: absolute !important;
    top: -27px !important;
    left: 93px  !important;  
}
.largecls{
  position: absolute !important;
    top: 71px !important;
    left: -14px !important;
}
@media (min-width: 768px) and (max-width: 991px) {
	.all_center {

		text-align: center;
		justify-content: center;
		display: grid;

	}
	.width-20{
		width: 25%;
		margin-bottom: 32px;
	}

	.round-border{
		border: 1px solid #4db68a;
		padding-top: 9px;
		border-radius: 109px;
		height: 146px;
		width: 145px;
	}
	.custom-height {
		height: 67px;
		margin-top: 27px;
	}
	.btns{
		width: 130px;

		height: 53px;
	}
	.custom_margin{
		margin-left: 0px!important;
		margin-right: 0px!important;
	}
	.all_center{
		text-align: center;
		justify-content: center;
		display: grid;
		-padding-left: 7px !important;
	}

	.circles {
		width: 269px;
		height: 269px;
		border-radius: 224px;
		margin-left: 0px !important;
		background-color: rgba(48,194,131,0.5019607843137255);
		border: 5px solid #ffffff;
		margin-bottom: 32px;

	}
	.plus-minus{
		display: block !important;
	}
	.textstyle {
		color: white;
		font-size: 34px;
		font-weight: bold;
		margin-top: 92px;
	}
	.text1{
		margin-top: 77px !important;
	}
	.text2{
		margin-top: 76px !important;
	}
	img.images{
		width: 93px;
	}
	.card {
		background-color: white;
		margin-left: 6px;
		margin-right: 6px;
		border-radius: 3px;
		padding-top: 12px;
		padding-left: 12px;
		padding-right: 12px;
		padding-bottom: 36px;
		display: none;
		overflow-x: hidden;
		overflow-y: auto;
		height: 693px;

	}
}

@media (min-width: 320px) and (max-width: 590px) {
	.width-20{
		width: 50%;
		margin-bottom: 32px;
	}

	.round-border{
		border: 1px solid #4db68a;
		padding-top: 9px;
		border-radius: 109px;
		height: 146px;
		width: 145px;
	}
	.custom-height {
		height: 67px;
		margin-top: 27px;
	}
	.btns{
		width: 130px;
		height: 53px;
	}
	.custom_margin{
		margin-left: 0px!important;
		margin-right: 0px!important;
	}
	.all_center{
		text-align: center;
		justify-content: center;
		display: grid;
		-padding-left: 7px !important;
	}

	.circles {
		width: 269px !important;
		height: 269px !important;
		border-radius: 224px;
		margin-left: 0px !important;
		background-color: rgba(48,194,131,0.5019607843137255);
		border: 5px solid #ffffff;
		margin-bottom: 32px;

	}
	.plus-minus{
		display: block !important;
	}
	.textstyle {
		color: white;
		font-size: 34px;
		font-weight: bold;
		margin-top: 34px;
	}
	.text1{
		margin-top: 77px !important;
	}
	.text2{
		margin-top: 76px !important;
	}
	img.images{
		width: 93px;
	}
	.card {
		background-color: white;
		margin-left: 6px;
		margin-right: 6px;
		border-radius: 3px;
		padding-top: 12px;
		padding-left: 12px;
		padding-right: 12px;
		padding-bottom: 36px;
		display: none;
		overflow-x: hidden;
		overflow-y: auto;
		height: 693px;

	}

}

</style>
<script>
function order_now(a) { //order now
		alert(a);
	// var category_id = <?php echo $category_id; ?>;
	// var name = "<?php echo $title; ?>";
	// var slug = "<?php echo $re_product->product_slug; ?>";
	// var price = $("#price1").val();

	// $.ajax({
	// 	method:'POST',
	// 	url:"<?php echo base_url('order/order_now');?>",
	// 	data:{id:category_id,name:name,selected:newProducts,price:price,slug:slug},
	// 	dataType:'json',

	// 	success:function(data)
	// 	{
	// 		if(data.status){
	// 			var url = "<?php echo base_url("order/add_more"); ?>";
	// 			window.location = url;
	// 		} else{
	// 			toasterOptions();
	// 			toastr.error(data.msg);
	// 		}
	// 	}
	// }); 
}
</script>
<?php

$productItems = [];
$productSize = [];
$counter = 0;
$dress = [];
$top = [];
$premium = [];
$basees = [];
$top_name = [];
$pre_name = [];
$base_name = [];
$dress_name = [];
if(isset($items)){
$itemsArray =  json_decode($items);
foreach ($itemsArray as $k => $v) {
	foreach ($v as $k2 => $v2) {
		if($k == "dress"){
			$array =  array('product' => $v2->product, 'size' =>$v2->size);
			array_push($productSize,$array);
			array_push($dress, $v2->product);
		}
		elseif($k == "pre"){
			
			array_push($premium, $v2->product);
		}
		elseif($k == "top"){
			
			array_push($top, $v2->product);
		}
		elseif($k == "base"){
			
			array_push($basees, $v2->product);
		}

		array_push($productItems,$v2->product); //sort the selected items in array
	}
}
}
foreach ($top as $k3 => $v3) {
$product = ingredients_price($v3);
array_push($top_name, $product->cat_pro_name);

}
foreach ($premium as $k4 => $v4) {
$product = ingredients_price($v4);
array_push($pre_name, $product->cat_pro_name);

}
foreach ($basees as $k5 => $v5) {
$product = ingredients_price($v5);
array_push($base_name, $product->cat_pro_name);

}
foreach ($dress as $k6 => $v6) {
$product = ingredients_price($v6);
array_push($dress_name, $product->cat_pro_name);

}

$top = array_combine($top, $top_name);
$premium = array_combine($premium, $pre_name);
$dress = array_combine($dress, $dress_name);
$basees = array_combine($basees, $base_name);
$arrayIndex = "";

?> 

<div class="container-fluid">

<div class="row">
	<div class="col-lg-12 col-xs-12">
		<center>
			<span class="center-text"><?=$order_data['order_name'];?> <br> 
				<div style="display: inline;" id="price"><?php echo MONEY_SIGN; ?><?php echo $price; ?></div></span>
			</center>
		</div>
	</div>
	<div class="col-lg-1">
	</div>
	<div class="col-lg-10">
	<div class="row all_center" >
		<div class="row centeraline">
		<input id="price1" type="hidden" value="<?php echo $price; ?>">

		<?php foreach ($categories as $key => $value) { 
			if($value->name == "toppings"){?>
				<a class="show_items top clicked" style data-id = "<?=$value->cat_id?>">
							<div class="col-lg-2 col-sm-6" style="text-align: center; justify-content: center;">
								<div class="circles hovercircle">
									<center><div class="textstyle clicked"><?=$value->name?></div>

										<p class="items_div" style="color: #fff; text-align: center;">

										</p> 
									</center>

								</div>
							</div>
						</a>
			<?php }else{ 

				if(strtolower($value->name) == "toppings"){
					$arrayIndex = "top";?>
					<input type="hidden" id="countervalue<?=$arrayIndex?>" value="<?php echo count($top); ?>">
				<?php }

				if(strtolower($value->name) == "premiums"){
					$arrayIndex = "pre";?>
					<input type="hidden" id="countervalue<?=$arrayIndex?>" value="<?php echo count($premium); ?>">
				<?php }

				if(strtolower($value->name) == "bases"){
					$arrayIndex = "base";?>
					<input type="hidden" id="countervalue<?=$arrayIndex?>" value="<?php echo count($basees); ?>">
					<?php }

				if(strtolower($value->name) == "dressings"){
					$arrayIndex = "dress";?>
					<input type="hidden" id="countervalue<?=$arrayIndex?>" value="<?php echo count($dress); ?>">
				<?php }
				?>
				<a  class="show_items  <?php echo $arrayIndex; ?>"  data-id = "<?=$value->cat_id?>">
							<div class="col-lg-3 col-sm-6 " style="text-align: center; justify-content: center;">

								<div class="circles hovercircle">
									<center><div class="textstyle "><?=$value->name?></div>

										<p class="items_div" style="color: #fff; text-align: center;">

										</p> 
									</center>
								</div>

							</div>
						</a>
			<?php } } ?>
		</div>
	</div>
	</div>
		<div class="row">
			<div class="col-lg-12">&nbsp;
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12">&nbsp;
			</div>
		</div>
</div>
<!-- <section class="menu-section" style="align-items: end!important;">
<div class="col-md-12 col-lg-12 col-sm-12 col-xs-12 " >	
<h2 style="text-align: center; color: #fff;"><?=$order_data['order_name'];?></h2>
<h3 id="price" style="text-align: center; color: #fff;">$<?php echo $price; ?></h3>
<input id="price1" type="hidden" value="$<?php echo $price; ?>">
<div class="" >	
	<div class="row center-div">
		<?php foreach ($categories as $key => $value) { 
		
			if($value->name == "TOPPINGS"){?>
				<a class="show_items top" data-id = "<?=$value->cat_id?>">
	    		<div class="round sidebar-margin dotted_hovicon effect-8 mr-2" style=" width:300px !important; height: 300px !important;">
	    			<span class="content marginy0" ><?=$value->name?></span>
	    			<p  class="items_div"  style="color: #fff; text-align: center;">
	    				
	    			</p> 
	    		</div>
	    	</a>
			<?php }else{ 
			if($value->name == "TOPPINGS"){
				$arrayIndex = "top";
			}

			if($value->name == "PREMIUMS"){
				$arrayIndex = "pre";
			}

			if($value->name == "BASES"){
				$arrayIndex = "base";
			}

			if($value->name == "DRESSINGS"){
				$arrayIndex = "dress";
			}
			?>
			<a class="show_items <?php echo $arrayIndex; ?>" data-id = "<?=$value->cat_id?>">
	    		<div class="round sidebar-margin hovicon effect-8 mr-2" style=" width:300px !important; height: 300px !important;">
	    			<span class="content marginy0"><?=$value->name?></span> 
	    			<p class="items_div" style="color: #fff; text-align: center;">
	    				
	    			</p> 
	    		</div>
	    	</a>
		<?php } } ?>
		
	</div>
</div>
</div>
<div class=" btm-center done">
<a href="">
	<div class="round sidebar-margin hovicon_small effect-8 mr-2">
		<span class="content marginy0">Looks Good</span>
	</div>
</a>
</div>
</section>	 -->

<div class="row all_center">
			<div class="card text-center" style="position: relative !important;">
				<h3 class="card-title"></h3>
				<div class="" style="padding-left:25px; " >

<?php foreach ($categories as $key1 => $value1) { 


if($value1->name == "Toppings"){
$arrayIndex = "top";

}

if($value1->name == "Premiums"){
$arrayIndex = "pre";

}

if($value1->name == "Bases"){
$arrayIndex = "base";

}

if($value1->name == "Dressings"){
$arrayIndex = "dress";

}?>

<div class=" bg-white animated slideInUp items hidden <?=$value1->cat_id?>" data-max = "<?=$value1->maxQty?>" data-min = "<?=$value1->minQty?>" >
			

			<input type="hidden" id="maxQty" value="<?=$value1->maxQty?>">
			<input type="hidden" id="minQty" value="<?=$value1->minQty?>">
			<input type="hidden" id="counter" value="<?=$counter?>">
			<?php 
			$ingredients = has_ingredeients($value1->cat_id); 
						 

			foreach ($ingredients as $key2 => $value2) { 



				if($value1->name == "Dressings"){ ?>
					<div class="col-lg-2 col-sm-12 col-xs-12 col-md-3 option">
						<div class="ci circle ci_dressing spindressing <?php if(isset($productItems)){ if (in_array($value2->cat_pro_id, $productItems)){ echo 'color '; } }?>" onclick="encirecl(this,<?=$value1->cat_id?>);" data-name="<?php echo $value2->cat_pro_name ?>" data-price = "<?=$value2->cat_pro_price?>" data-id="<?php echo $value2->cat_pro_id ?>" data-index= "<?=$arrayIndex?>">
							<img class="basemenuimage" src="<?php echo PRODUCT_IMAGE_UPLOAD.$value2->cat_pro_image  ?>">
							<p class="menu_text">
								<?php echo $value2->cat_pro_name ?>
							</p>
						</div>
	<div class="extracls inbtn" style="display: <?php if(isset($productItems)){ if (in_array($value2->cat_pro_id, $productItems)){ echo 'block '; }else{echo "none";  } }?>;">

		<button type="button" id="<?= $value2->cat_pro_id?>extra" class="btn-circle otherbtn <?php foreach ($productSize as $k => $v) {
			if($v['product'] ==  $value2->cat_pro_id && $v['size'] == 'S'){
				echo 'active';
			}
		} ?>" data-index= "<?=@$arrayIndex?>" onclick="toppingSize(this,<?php echo $value2->cat_pro_id; ?>,'Extra')"><img src="<?php echo base_url(); ?>/assets/dropicon.png" style="width:33px"><br/>Extra</button>
	</div>
	<div class="mediumcls inbtn"  style="display: <?php if(isset($productItems)){ if (in_array($value2->cat_pro_id, $productItems)){ echo 'block '; }else{echo "none";  } }?>;">

		<button type="button" id="<?= $value2->cat_pro_id?>medium" class="btn-circle otherbtn <?php foreach ($productSize as $k => $v) {
			if($v['product'] ==  $value2->cat_pro_id && $v['size'] == 'M'){
				echo 'active';
			}
		} ?>" data-index= "<?=@$arrayIndex?>" onclick="toppingSize(this,<?php echo $value2->cat_pro_id; ?>,'Medium')"><img src="<?php echo base_url(); ?>/assets/dropicon.png" style="width:27px"><br/>Medium</button>
	</div>
	<div class="largecls inbtn" style="display: <?php if(isset($productItems)){ if (in_array($value2->cat_pro_id, $productItems)){ echo 'block '; }else{echo "none";  } }?>;">
		<button type="button" id="<?= $value2->cat_pro_id?>light" class="btn-circle otherbtn <?php foreach ($productSize as $k => $v) {
			if($v['product'] ==  $value2->cat_pro_id && $v['size'] == 'L'){
				echo 'active';
			}
		} ?>" data-index= "<?=@$arrayIndex?>" onclick="toppingSize(this,<?php echo $value2->cat_pro_id; ?>,'Light')"><img src="<?php echo base_url(); ?>/assets/dropicon.png" style="width:18px"><br/>Light</button>
	</div>

						<div class="sczrbtn" style="display: <?php if(isset($productItems)){ if (in_array($value2->cat_pro_id, $productItems)){ echo 'block '; }else{echo "none";  } }?>;">

							<input type="hidden" id="ingSize<?php echo $value2->cat_pro_id; ?>" value = "<?php echo isset($v['size'])?$v['size']:'';  ?>">

							<button type="button" id="<?= $value2->cat_pro_id?>side" class="btn-circle-top otherbtn <?php foreach ($productSize as $kx => $vx) {
								if($vx['product'] ==  $value2->cat_pro_id){
									echo 'active';
								}
							} ?>" data-index= "<?=@$arrayIndex?>" onclick="toppingSize(this,<?php echo $value2->cat_pro_id; ?>,'On The Side')"><img src="<?php echo base_url(); ?>/assets/bowl.png" style="width:27px"><br/>On The Side</button>
							<!-- <button type="button" class="btn-circle-top <?php foreach ($productSize as $kx => $vx) {
								if($vx['product'] ==  $value2->cat_pro_id && $vx['serving'] == 'Mixed'){
									echo 'active';
								}
							} ?>" data-index= "<?=@$arrayIndex?>" onclick="serving(this,<?php echo $value2->cat_pro_id; ?>,'Mixed')">Mixed</button> -->

						</div>

						<!-- <div class="qtybtn" style="display: <?php if(isset($productItems)){ if (in_array($value2->cat_pro_id, $productItems)){ echo 'block '; }else{echo "none";  } }?>;">
							<button type="button"  data-index= "<?=@$arrayIndex?>"	 class="btn mybtn btn-circle" onclick="plus(this,<?=$value2->cat_pro_id?>)"><i class="fa fa-plus"></i></button>
							<input class="counter" id="<?=$value2->cat_pro_id?>" value="1">
							<button type="button"  data-index= "<?=@$arrayIndex?>"	 class="btn mybtn btn-circle" onclick="minus(this,<?=$value2->cat_pro_id?>)"><i class="fa fa-minus"></i></button>
						</div> -->
					</div>
				<?php }else{ ?>

					<div class="col-lg-2 col-sm-6 col-sm-12 col-xs-12 col-md-3" style="padding-bottom:25px;">
						<div class="ci circle <?php if(isset($productItems)){ if (in_array($value2->cat_pro_id, $productItems)){ echo 'color '; }else{ echo 'spin';} }?>"  onclick="encirecl(this,<?=$value1->cat_id?>);" data-name="<?php echo $value2->cat_pro_name ?>" data-price = "<?=$value2->cat_pro_price?>" data-id="<?php echo $value2->cat_pro_id ?>" data-index= "<?=$arrayIndex?>">
							<img class="basemenuimage" src="<?php echo PRODUCT_IMAGE_UPLOAD.$value2->cat_pro_image  ?>">
							<p class="menu_text">
								<?php echo $value2->cat_pro_name ?>
							</p>
							<p class="menu_text inc"><?php if(isset($productItems)){ if (in_array($value2->cat_pro_id, $productItems)){ echo 'Included '; } }?>
							</p>
						</div>
						
						<div class="qtybtn" style="display: <?php if(isset($productItems)){ if (in_array($value2->cat_pro_id, $productItems)){ echo 'block '; }else{echo "none";  } }?>;">
							<button type="button"  data-index= "<?=@$arrayIndex?>"	 class="btn-circle" onclick="plus(this,<?=$value2->cat_pro_id?>)"><i class="fa fa-plus"></i></button>
							<input class="counter" id="<?=$value2->cat_pro_id?>" value="1">
							<button type="button" onclick="minus(this,<?=$value2->cat_pro_id?>)" data-name="<?php echo $value2->cat_pro_name ?>" data-catid="<?=$value1->cat_id?>" data-price = "<?=$value2->cat_pro_price?>" data-id="<?php echo $value2->cat_pro_id ?>" data-index= "<?=$arrayIndex?>"class="btn-circle" >
								<i class="fa fa-minus"></i>
							</button>
						</div>
					</div>

				<?php } } ?>

				<input type="hidden" id="countervalue<?=@$arrayIndex?>" value="0">
</div>
<?php } ?>
</div></div></div>
<br/><br/><br/>
			<div class="row">
				<div class="col-lg-4">
				</div>
				<div class="col-lg-4 text-center done">
					<button type="button" class="bottom-button">Looks Good</button>
				</div>
				<div class="col-lg-4">
				</div>
			</div>
		<br/><br/>
		


<script type="text/javascript">

var addclass = 'color';
var removeclass = 'spin';
var products = [];
var newProductscheck = [];
<?php 
echo "var newProducts =".$items.";";
echo "var newProductscheck =".$items.";";
?>

var names = [];	
var counter = 0;

$(document).ready(function(){
	var pre_selected = <?php echo json_encode($premium); ?>;
	var base_selected = <?php echo json_encode($basees); ?>;
	var dress_selected = <?php echo json_encode($dress); ?>;
	var top_selected  = <?php echo json_encode($top); ?>;
	$.each( pre_selected, function( key, value ) {
$(".pre").find("p").append("<div data-salad-id='" + key + "'>" + value + "</div>"); //get array of product name and id only
});
	$.each( base_selected, function( key, value ) {
$(".base").find("p").append("<div data-salad-id='" + key + "'>" + value + "</div>"); //get array of product name and id only
});
	$.each( dress_selected, function( key, value ) {
$(".dress").find("p").append("<div data-salad-id='" + key + "'>" + value + "</div>"); //get array of product name and id only
});
	$.each( top_selected, function( key, value ) {
$(".top").find("p").append("<div data-salad-id='" + key + "'>" + value + "</div>"); //get array of product name and id only
});


					$(".show_items").click(function(e){

								var id = $(this).data("id");
								var text = $(e.target).closest('.circles').find(".textstyle").text();

								$(".card-title").html(text);
								
								if($("."+id).hasClass("hidden")){
									$(".card").addClass("show");
									scroll();

									$(".items").addClass("hidden");
									$("."+id).removeClass("hidden");
								}else{
									$("."+id).addClass("hidden");
									 	$(".card").toggle();
									 	$(".card").removeClass("show");
									 	scroll();
								}
							});

function scroll(){
			document.querySelector('.card-title').scrollIntoView({ 
				behavior: 'smooth' 
			});
}
	$(".done").on("click",function() {
		var customtitel = "";
			var checkary1 = [];
			var checkary2 = [];
			var i = 0;
			var j = 0;

			$.each( newProducts, function( index, value ){
				$.each( value, function( index2,  value2 ){

					checkary1[i] = value2.product;
					i++;
				});
			});
			$.each( newProductscheck, function( index, value ){
				$.each( value, function( index2,  value2 ){
					
					checkary2[j]  = value2.product;
					j++;
				});
			});
			var edit = 0;
			if(JSON.stringify(checkary1) != JSON.stringify(checkary2)) {
				customtitel = "Custom ";
				edit = 1;
			}
		
		var price = $("#price1").val();
		$.ajax({
			method:'POST',
			url:"<?php echo base_url('order/edit_order');?>",
			data:{selected:newProducts,key:<?php echo $skey; ?>,price:price,customtitel:customtitel,edit:edit},
			dataType:'json',

			success:function(data)
			{
				if(data.status){
					var url = "<?php echo base_url("order/view_cart"); ?>";
					window.location = url;
				} else{
					toasterOptions();
					toastr.error(data.msg);
				}
			}
		}); 
	})
});



function addToArray(name, value) { //add products to array
newProducts[name].push(value);
}



function plus(ele,id){

	var id = id.toString();
	var abc = $(ele).data("index");
	var count = $(ele).parents(".qtybtn").find("input").val();
  	
	if(count == ""){
  		count = 1;
  	}
	var updatedCount = parseInt(count)+parseInt(1);
	var minQty = $("#minQty").val();
	var maxQty = $("#maxQty").val(); //get max quantity of category
	var totlco = $("#countervalue"+abc).val();

	
	if(count == maxQty || totlco == maxQty){
		toasterOptions();
		toastr.error('You Reached Maximun Limit');
		return false;
	}
	$("#countervalue"+abc).val(parseInt($("#countervalue"+abc).val())+parseInt(1));
	$(ele).parents(".qtybtn").find("input").val(updatedCount);
	$(ele).parents(".qtybtn").find("#counting"+id).val(updatedCount);
	$(newProducts[abc]).each(function( index, element ) {
	if(element.product == id){
	 newProducts[abc].splice(index, 1); //remove form array
	 return false;
	}

	});
	
	var size;
    var serving;
    if(typeof $("#ingSize"+id).val() === "undefined"){
    	size = '';
    }else{
    	size = $("#ingSize"+id).val();
    }

    if(typeof $("#ingServing"+id).val() === "undefined"){
    	serving = '';
    }else{
    	serving = $("#ingServing"+id).val();
    }
    $("#"+id+"Qty").val(updatedCount);
	var addeddata = {'product':id,'quantity':updatedCount,'size':size,'serving':serving}; //create object of product
	addToArray(abc,addeddata);
	var category_id = <?php echo $order_category; ?>;

	$.ajax({ //get price if ingredients
		method:'POST',
		url:"<?php echo base_url('order/getIngPrice');?>",
		data:{ing:id},
		dataType:'json',
		success:function(res)
		{
			var updatedPrice = 0;
      		var currentPrice = $("#price1").val();
      		var totlco = $("#countervalue"+abc).val();

      		if(totlco == minQty || totlco > minQty){
      			updatedPrice = parseFloat(currentPrice) + parseFloat(res.price);
      		}else{
      			updatedPrice = parseFloat(currentPrice);
      		}


      		$("#price").html("<?php echo MONEY_SIGN ?>"+updatedPrice);
      		$("#price1").val(updatedPrice);
		}
	}); 

}

function minus(ele,id){
var abc = $(ele).data("index");
var minQty = $("#minQty").val();
var count =   $(ele).parents(".qtybtn").find("input").val();
if(count<=1){
	var cat_id = $(ele).data("catid");
	encirecl(ele,cat_id,true);
	$(ele).parent().prev().find(".inc").html('');
	return false;
}else{
	var updatedCount = parseInt(count)-parseInt(1);
	$(ele).parents(".qtybtn").find("input").val(updatedCount);
	$(newProducts[abc]).each(function( index, element ) {

		if(element.product == id){
 newProducts[abc].splice(index, 1); //remove form array
 return false;
}

});

	var countinput =  $(ele).parent().find(".qtybtn").find("input").val();
	$("#countervalue"+abc).val(parseInt($("#countervalue"+abc).val())-parseInt(1));
var addeddata = {'product':id,'quantity':updatedCount,'size':"",'serving':''}; //create object of product
addToArray(abc,addeddata);
var category_id = <?php echo $order_category; ?>;
$.ajax({ //get price if ingredients
	method:'POST',
	url:"<?php echo base_url('order/getIngPrice');?>",
	data:{ing:id},
	dataType:'json',
	success:function(res)
	{
			var updatedPrice = 0;
      		var currentPrice = $("#price1").val();
      		var totlco = $("#countervalue"+abc).val();

      		if(totlco == minQty || totlco > minQty){
      			updatedPrice = parseFloat(currentPrice) - parseFloat(res.price);
      		}else{
      			updatedPrice = parseFloat(currentPrice);
      		}


      		$("#price").html("<?php echo MONEY_SIGN ?>"+updatedPrice);
      		$("#price1").val(updatedPrice);

	}
}); 

}

}

function encirecl(ele,cat_id,remove = false) 
{

		var maxQty = $("."+cat_id).data("max");
		var addCounter = parseInt($("#counter").val())+parseInt(1);  //count added
		var minQty = $("."+cat_id).data("min"); //get min quantity of category

		var abc = $(ele).data("index"); // category index name
		var selectedCount = newProducts[abc].length; //selected items count
		var newCounter = parseInt(selectedCount)+parseInt(addCounter); //new counter set
		var totlco = $("#countervalue"+abc).val();
		if(remove == false){
			if(newCounter>maxQty || totlco==maxQty)  //max quantity reach return false
			{ 
				if (!$(ele).hasClass('color')) {
					toasterOptions();
					toastr.error('You Reached Maximun Limit');
					return false;
				}
			}
		}
		$(ele).toggleClass(addclass);

		if ($(ele).hasClass('color') && remove == false) { //if selected

		counter++;
		var item = $(ele).data('id'); //product id
		var n = item.toString();
		$("."+abc).find("p").append("<div data-salad-id='" + $(ele).data('id') + "'>" + $(ele).data('name') + "</div>");
		$(ele).removeClass(removeclass); //remove class selected
		var addeddata = {'product':n,'quantity':1,'size':""}; //create object of product
		addToArray(abc,addeddata);
		$(ele).parent().find(".inbtn").fadeIn();
		$(ele).parent().find(".sczrbtn").fadeIn();
		$(ele).parent().find(".qtybtn").fadeIn();

		$("#countervalue"+abc).val(parseInt($("#countervalue"+abc).val())+parseInt(1));
		
		var currentPrice = $("#price1").val();
		var updatedPrice = 0;
		
		if(minQty < 1 || totlco >= 4){
			var prc = $(ele).data('price');
		    $(ele).find(".inc").html("<?php echo MONEY_SIGN; ?>"+prc);
			updatedPrice = parseFloat(prc)+parseFloat(currentPrice);
		}else{
			$(ele).find(".inc").html("Included");
			updatedPrice = parseFloat(currentPrice);
		}

		$("#price").html("<?php echo MONEY_SIGN; ?>"+updatedPrice);
		$("#price1").val(updatedPrice);

		$("#"+item).val(parseInt(1));

		} else {
		       // remove form array
		counter--;
		var prc = $(ele).data('price');
		var currentPrice = $("#price1").val();
		var updatedPrice = 0;
		if(minQty < 1 || totlco >= 4){
			updatedPrice = parseFloat(currentPrice)-parseFloat(prc); 
		}else{
			updatedPrice = currentPrice;
		}

		$("#price").html("<?php echo MONEY_SIGN; ?>"+updatedPrice);
		$("#price1").val(updatedPrice);
		$(ele).addClass(removeclass);
		var item = $(ele).data('id')
		if(remove == true){
	      	 $(ele).parent().prev().addClass(removeclass);
	      	 $(ele).parent().prev().removeClass(addclass);
	      	 $(ele).parent().css({'display': 'none'});
	  		}
		var n = item.toString();
		$("."+abc).find("p").children("div[data-salad-id='" + $(ele).data('id') + "']").remove(); //remove form list
		$(ele).parent().find(".inbtn").fadeOut();
		$(ele).parent().find(".sczrbtn").fadeOut();
		$(ele).parent().find(".qtybtn").fadeOut();
		$(newProducts[abc]).each(function( index, element ) {

			if(element.product == item){
		 newProducts[abc].splice(index, 1); //remove form array
		 return false;
		}

		});
		$("#countervalue"+abc).val(parseInt($("#countervalue"+abc).val())-parseInt(1));

		$(ele).find(".inc").html("");
		}

		 $.ajax({ //get price if ingredients
		 	method:'POST',
		 	url:"<?php echo base_url('order/getPrice');?>",
		 	data:{id:<?php echo $order_category; ?>,selected:newProducts},
		 	dataType:'json',
		 	success:function(res)
		 	{

		 		$("#price1").val(res.price);
		 		$("#price").html("<?php echo MONEY_SIGN; ?>"+res.price);

		 	}
		 });  

		}


function toppingSize(ele,id,size){ //topping size


    	if($(ele).closest("div .inbtn").children().hasClass("active")){
         $(ele).closest("div .inbtn").children().removeClass("active");
         return false;
      }
     
      if($("#"+id+"side").hasClass("active")){
          $("#"+id+"side").removeClass("active");
      }
      if($("#"+id+"extra").hasClass("active")){
        $("#"+id+"extra").removeClass("active");
      }
      if($("#"+id+"medium").hasClass("active")){
         $("#"+id+"medium").removeClass("active");
      }

     if($("#"+id+"light").hasClass("active")){
        $("#"+id+"light").removeClass("active");
      }
      
      var abc = $(ele).data("index");

      $(newProducts[abc]).each(function( index, element ) {
        if(element.product == id) {
          newProducts[abc].splice(index, 1);
          return false;
        }
        
      });

      var qunty =  $("#"+id+"Qty").val();

      $("div[data-salad-id='" + id + "']").children("div[data-size-id='" + id + "']").remove();

       $(".items_div").children("div[data-salad-id='" + id + "']").append("<div style='display:inline' data-size-id='" + id + "'> (" + size + ")</div>");


      
      // var serving;
      // if(typeof $("#ingServing"+id).val() === "undefined"){
      //   serving = '';
      // }else{
      //   serving = $("#ingServing"+id).val();
      // }
      $(ele).addClass("active");
      var addeddata = {'product':id,'quantity':qunty,'size':size};
      addToArray(abc,addeddata);
      $("#ingSize"+id).val(size);

}

function serving(ele,id,serve){ //serving side

if($(ele).closest("div .sczrbtn").children().hasClass("active")){
	$(ele).closest("div .sczrbtn").children().removeClass("active");
}


$(ele).parents().find(".qtybtn").find("input").addClass("a");
var size = $("#ingSize"+id).val();
if(size == ""){

	toasterOptions();
	toastr.error("Please select the size first");
	return false;

}
var abc = $(ele).data("index");
$(newProducts[abc]).each(function( index, element ) {
	if(element.product == id) {
		newProducts[abc].splice(index, 1);
		return false;
	}

});
$(ele).addClass("active");
var qunty =    $("#"+id+"Qty").val();

var addeddata = {'product':id,'quantity':qunty,'size':size,'serving':serve};
addToArray(abc,addeddata);
$("#ingServing"+id).val(serve);



}





</script>

