<style type="text/css">
	body { 
		background: url('assets/images/backgroundimgae.png') no-repeat center center fixed; 
		-webkit-background-size: cover;
		-moz-background-size: cover;
		-o-background-size: cover;
		background-size: cover;
		background-color: rgba(48,194,131,0.5019607843137255);

	}
	p{
		color:white !important;

	}

	.center-text{
		font-family: Lato-Black, AdobeInvisFont, MyriadPro-Regular;
		color: white;
		font-size: 42px;
		font-weight: bold;			
	}
	.float-right{
		float: right !important;
	}
	.full-card{
		background-color: #03030dba;
		border: 1px solid white;
		padding: 32px 19px 32px 43px;
		color: white;	

	}
	.salad-sub{
		font-weight: 100;
	}
	.salad{
		font-weight: bold;
	}
	.ed-button{
		background-color: #30c283;
		border: 1px solid #30c283;
		padding: 9px 30px;
		border-radius: 3px;
		margin-right: 18px;
		font-weight: bold;
		font-size: 16px;

	}
	.glyphicon-plus{
		background-color: #4db68a;
		padding: 7px 8px 8px 9px;
		color: white;
		font-weight: bold;
		border-radius: 3px;
		font-size: 11px;
		cursor: pointer;
	}

	.glyphicon-minus{
		background-color: #4db68a;
		padding: 7px 8px 8px 9px;
		color: white;
		font-weight: bold;
		border-radius: 3px;
		font-size: 11px;
		cursor: pointer;
	}
	.numbers{
		font-weight: 600;
		font-size: 18px;
	}
	.first-border{
		border: 1px solid white;
	}
	.salad-box{
		border-right: 1px solid white;
		padding: 0px 29px 26px;
	}
	.total-column{
		height: 258px;
		padding: 28px 19px 22px 18px;
		border: 1px solid white;
	}
	.last-column{
		padding: 3px 30px;
	}
	.p-price{
		margin-top: 10px;
	}

	@media (min-width: 768px) and (max-width: 991px) {
		.full-card {
			background-color: #03030dba;
			padding: 13px 24px 16px 25px;
			color: white;
			border: none;-
		}

		.btns{
			width: 130px;

			height: 53px;
		}
		.custom_margin{
			margin-left: 0px!important;
			margin-right: 0px!important;
		}
		.all_center{
			text-align: center;
			justify-content: center;
			display: grid;
		}

		.circles {
			width: 269px;
			height: 269px;
			border-radius: 224px;
			margin-left: 0px !important;
			background-color: rgba(48,194,131,0.5019607843137255);
			border: 5px solid #ffffff;
			margin-bottom: 32px;

		}
		.textstyle {
			color: white;
			font-size: 34px;
			font-weight: bold;
			margin-top: 92px;
		}
		.text1{
			margin-top: 77px !important;
		}
		.text2{
			margin-top: 76px !important;
		}
		.last-column {
			padding: 0px 15px;
			margin-top: 26px;
		}
		.last-row{
			border: none;
		}

		.p-plus{
			display: inline;
			margin-right: 7px;
			margin-left: -18px;
		}
		.p-minus{
			display: inline;
			margin-right: 50px;
		}
		.p-price{
			display: inline;
			margin-top: 0px;
		}
		.p-numbers{
			display: inline;
			margin-right: 7px;
		}
		.full-card {
			background-color: #03030dba;
			padding: 13px 24px 32px 25px;
			color: white;
			border: none;

		}
		.salad-box {
			padding: 0px 16px 26px;
			border-right:none; 
		}
		.ed-button {
			background-color: #30c283;
			border: 1px solid #30c283;
			padding: 7px 23px;
			border-radius: 3px;
			margin-right: 8px;
			font-weight: bold;
			font-size: 15px;
		}
		.side-bar-content{
			border-top: 1px solid white;
			padding-bottom: 20px;
		}

	}

	@media (min-width: 320px) and (max-width: 590px) {
		.full-card {
			background-color: #03030dba;
			padding: 13px 24px 16px 25px;
			color: white;
			border: none;-
		}

		.btns{
			width: 130px;

			height: 53px;
		}
		.custom_margin{
			margin-left: 0px!important;
			margin-right: 0px!important;
		}
		.all_center{
			text-align: center;
			justify-content: center;
			display: grid;
		}

		.circles {
			width: 269px;
			height: 269px;
			border-radius: 224px;
			margin-left: 0px !important;
			background-color: rgba(48,194,131,0.5019607843137255);
			border: 5px solid #ffffff;
			margin-bottom: 32px;

		}
		.textstyle {
			color: white !important;
			font-size: 34px;
			font-weight: bold;
			margin-top: 92px;
		}
		.text1{
			margin-top: 77px !important;
		}
		.text2{
			margin-top: 76px !important;
		}
		.last-column {
			padding: 0px 15px;
			margin-top: 26px;
		}
		.last-row{
			border: none;
		}

		.p-plus{
			display: inline;
			margin-right: 7px;
			margin-left: -18px;
		}
		.p-minus{
			display: inline;
			margin-right: 50px;
		}
		.p-price{
			display: inline;
			margin-top: 0px;
		}
		.p-numbers{
			display: inline;
			margin-right: 7px;
		}
		.full-card {
			background-color: #03030dba;
			padding: 13px 24px 32px 25px;
			color: white;
			border: none;

		}
		.salad-box {
			padding: 0px 16px 26px;
			border-right:none; 
		}
		.ed-button {
			background-color: #30c283;
			border: 1px solid #30c283;
			padding: 7px 23px;
			border-radius: 3px;
			margin-right: 8px;
			font-weight: bold;
			font-size: 15px;
		}
		.side-bar-content{
			border-top: 1px solid white;
			padding-bottom: 20px;
		}


	}
	.custom_margin{
		margin-left: 50px;
		margin-right: 50px;
	}
	.mt20{
		margin-top: 20px!important;
	}

</style>

<style type="text/css">
	.order-price{background: none;
		border: none;
		color: white;
	}
</style>
<div class="container-fluid">

	<div class="row">
		<div class="col-lg-12 col-xs-12" style="margin-top:-50px;">
			<center>
				<span class="center-text" >YOUR ORDER</span>
			</center>
		</div>
	</div>
	<br><br>
	<div>
			<div class="col-lg-1">&nbsp;</div>
		<div class="col-lg-10">
		<div class="full-card">
			<div class="row">
				
				<div class="col-lg-9">
					<?php 

					$order_price = 0;

					$orders = $this->session->userdata("order_cart"); //get orders session array
					//print_r($orders);
					foreach ($orders as $key => $value) { ?>

						<div class="row first-border" style="">
							<div class="col-lg-10 salad-box" style="">
								<h2 class="salad"><?php if($value['order_category'] == "drinks"){ echo $value['order_category']; }else { echo category_parent($value['order_category']); } ?> <span class="salad-sub">(<?php echo $value['order_name']; ?>) </span></h2>
								<?php
								$qty = $value['qty'];
								if($value['order_category'] == "drinks"){
									echo $value['order_items']."<br/>";

								}else{
									$decode = json_decode($value['order_items']);


									foreach ($decode as $key1 => $value1) {
										if($key1 == "top"){
											$INDEX = "TOPPINGS";
										}

										if($key1 == "pre"){
											$INDEX = "PREMIUMS";
										}

										if($key1 == "base"){
											$INDEX = "BASES";
										}

										if($key1 == "dress"){
											$INDEX = "DRESSINGS";
										}
										echo '<span class="box-text" style="color: #269f6c;font-size: 16px;font-weight: 600;">'.$INDEX.': </span>';
										$count = count($value1); 
										foreach ($value1 as $k => $v) {
											$product = ingredients_price($v->product);
											if($key1 == "dress"){

												$serving = !empty($v->serving)?$v->serving:'Side';
												$quant = !empty($v->quantity)?$v->quantity:'1';
												$size = !empty($v->size)?$v->size:'M';

												echo $product->cat_pro_name." (".$size.")" . "(Serving: ".$serving.")";
												if($quant > 1){
													echo "(Qty: ".$quant.")";
												}		 			

											}else{
												echo $product->cat_pro_name;
												if($v->quantity > 1){
													echo "(Qty: ".$v->quantity.")";
												}
											}


											if($count != $k+1)
											{
												echo ", ";
											}
											else
											{
												echo ".<br>";
											}
										}
									}
								}
								$odr_pr = $value['order_price'];
								if($value['order_category'] == "drinks"){
									$odr_pr = $value['order_price']/$qty;
								}
								?>
								<span style="color: #fff">
									<?php if($value['custom'] == 0){ echo "This Product Is Non Editable."; } ?>
								</span>
								<br/>
									<?php if($value['custom'] == 1){ ?>
										<?php if($value['order_category'] == "drinks"){ ?>
											<a  href="<?php echo base_url('order/edit_drink/').$value['slug']."/".$key; ?>" style="color:white;"><button type="button" class="ed-button">Edit</button></a>
										<?php } else { ?> 
											<a  href="<?php echo base_url('order/edit/').$value['slug']."/".$key; ?>" style="color:white; "><button type="button" class="ed-button">Edit</button></a>
										<?php } ?>
									<?php } ?>
									<a  href="<?php echo base_url('order/deleteItem/').$key; ?>" style="color:white;"><button type="button" class="ed-button">Delete</button></a>
									
								</div>

								<div class="col-lg-2 text-center side-bar-content">
									
									<div class="plus-minus" style="border: none; text-align: center;justify-content: center; display: grid;">
										<br>
										<input type="hidden" id="qty<?php echo $key; ?>" name="qty[]" value = "<?=$qty?>">
										<p class="p-plus">
										<button class="glyp-ico" data-price = "<?php echo $odr_pr; ?>" data-class= "<?php echo $key; ?>" onclick="minus(this,<?php echo $key; ?>);" > <span class="glyphicon glyphicon-minus"></span></button>
										</p>
										<p class="p-numbers">
										<input type="text" style="width:50px; height:10px; padding-left:10px;background-color: transparent;border:none" readonly id="<?php echo $key; ?>" value="<?=$qty?>" min="1"/>
										</p>
										<p class="p-plus">
										<button class="glyp-ico" data-price = "<?php echo $odr_pr; ?>" data-class= "<?php echo $key; ?>"  onclick="plus(this,<?php echo $key; ?>);"> <span class="glyphicon glyphicon-plus"></span></button>
										</p>
<!-- 
										<p class="p-plus">
											<span class="glyphicon glyphicon-plus"></span>
										</p>
										<p class="p-numbers">
											<span class="numbers">01</span>
										</p>
										<p class="p-minus">
											<span class="glyphicon glyphicon-minus"></span>
										</p> -->	
										<p class="p-price">
											$ <?php echo $value['order_price']; ?>
											<input type="hidden" class="order-price price<?php echo $key; ?>"  value="$ <?php echo $value['order_price']; ?>">
										</p>							    	
									</div>

								</div>
							</div>

							<?php 

							if($value['order_category'] == "drinks"){
								
								$order_price += $value['order_price'];	
							}else{

								$order_price += $value['order_price'];	
							}

						}	

						?>	
					</div>
					<div class="col-lg-3 text-center last-column" style="">
						<div class="row last-row" style="">
							<div class="col-lg-12 total-column" style="">
								<p>
									<span class="subtotal-text" style="float: left;font-weight: bold;">Subtotal:</span><span class="subtotal-number" style="float: right;font-weight: bold;">
										$ <input type="text" style="width:50px; height:15px; ;background-color: transparent;border:none" readonly class="order-price total-amount" value="<?php echo $order_price; ?>"></span>
								</p>
								<br><br>
								<p>
									
									<span class="total-text" style="float: left;font-weight: bold;">Total:</span><span class="to-tal-number" style="float: right;font-weight: bold;">$ <input type="text" style="width:50px; height:15px;background-color: transparent;border:none" name="total_price" readonly class="order-price total-amount" value="<?php echo $order_price; ?>"></span>
								</p>
								<br><br><br>
								<a style="color:white" href="<?php echo base_url('order/checkout'); ?>"><button type="button" class="ed-button" style="font-size: 13px;font-weight: 600;padding: 9px 18px; text-transform: uppercase;">Check Out</button></a>
								<a style="color:white" href="<?php echo base_url('order/'); ?>"><button type="button" class="ed-button" style="font-size: 13px;font-weight: 600;padding: 9px 18px;margin-right: 0px; text-transform: uppercase;">Add More</button></a>
							</div>
						</div>
					</div>

				</div>
				</div>
			</div>
			<br><br>
		</div>

	</div>
	<!-- <div class="container-fluid pt-5">
		<form id="order-data">
			<div class="row">
				<div class="col-md-2 col-lg-2 col-sm-12 col-xs-12"></div>
				<div class="col-md-7 col-lg-7 col-sm-12 col-xs-12 pt50">
					<h1 class="text-center text-white">YOUR ORDER</h1>
					<?php 

					$order_price = 0;

					$orders = $this->session->userdata("order_cart"); //get orders session array
					//print_r($orders);
					foreach ($orders as $key => $value) { ?>
						<hr class="hr-white">
						<div class="row">
							<div class="col-md-2 col-lg-2 col-sm-12 col-xs-12">
								<h2 class="text-white"><?php if($value['order_category'] == "drinks"){ echo $value['order_category']; }else { echo category_parent($value['order_category']); } ?></h2> 
							</div>
							<div class="col-md-5 col-lg-5 col-sm-12 col-xs-12">
								<h5 class="text-white"><?php echo $value['order_name']; ?></h5>
								<h6 class="text-white">
									<?php
									$qty = $value['qty'];
									if($value['order_category'] == "drinks"){
										echo $value['order_items'];

									}else{
										$decode = json_decode($value['order_items']);


										foreach ($decode as $key1 => $value1) {
											if($key1 == "top"){
												$INDEX = "TOPPINGS";
											}

											if($key1 == "pre"){
												$INDEX = "PREMIUMS";
											}

											if($key1 == "base"){
												$INDEX = "BASES";
											}

											if($key1 == "dress"){
												$INDEX = "DRESSINGS";
											}
											echo "<b>".$INDEX.": </b>";
											$count = count($value1); 
											foreach ($value1 as $k => $v) {
												$product = ingredients_price($v->product);
												if($key1 == "dress"){

													$serving = !empty($v->serving)?$v->serving:'Side';
													$quant = !empty($v->quantity)?$v->quantity:'1';
													$size = !empty($v->size)?$v->size:'M';

													echo $product->cat_pro_name." (".$size.")" . "(Serving: ".$serving.")";
													if($quant > 1){
														echo "(Qty: ".$quant.")";
													}		 			

												}else{
													echo $product->cat_pro_name;
													if($v->quantity > 1){
														echo "(Qty: ".$v->quantity.")";
													}
												}


												if($count != $k+1)
												{
													echo ", ";
												}
												else
												{
													echo ".<br>";
												}
											}
										}
									}
									$odr_pr = $value['order_price'];
									if($value['order_category'] == "drinks"){
										$odr_pr = $value['order_price']/$qty;
									}
									?>
								</h6> 
								<span style="color: #fff">
									<?php if($value['custom'] == 0){ echo "This Product Is Non Editable."; } ?></span>
								</div>
								<div class="col-md-3 col-lg-3 col-sm-12 col-xs-12">
									<div class="leftsidecontentmiddle">
										<?php if($value['custom'] == 1){ ?>
											<?php if($value['order_category'] == "drinks"){ ?>
												<a  href="<?php echo base_url('order/edit_drink/').$value['slug']."/".$key; ?>" class="btn btn-default btn-w btn-blocka">EDIT</a>
											<?php } else { ?> 
												<a  href="<?php echo base_url('order/edit/').$value['slug']."/".$key; ?>" class="btn btn-default btn-w btn-blocka">EDIT</a>
											<?php } ?>
										<?php } ?>
										<a  href="<?php echo base_url('order/deleteItem/').$key; ?>" class="btn btn-default btn-w btn-blocka">DELETE</a>
									</div>
								</div>
								<div class="col-md-2 col-lg-2 col-sm-12 col-xs-12 leftsidecontentmiddle" style="text-align: center; vertical-align: middle;">
									<div class="row ">

										<input type="hidden" id="qty<?php echo $key; ?>" name="qty[]" value = "<?=$qty?>">

										<button class="glyp-ico" data-price = "<?php echo $odr_pr; ?>" data-class= "<?php echo $key; ?>" onclick="minus(this,<?php echo $key; ?>);" > <i class="fa fa-minus-circle"></i></button>
										<input type="text" readonly id="<?php echo $key; ?>" value="<?=$qty?>" min="1" style="width: 30px; background: transparent; border: none;color: #fff; font-size: 18px;" />
										<button class="glyp-ico" data-price = "<?php echo $odr_pr; ?>" data-class= "<?php echo $key; ?>"  onclick="plus(this,<?php echo $key; ?>);"> <i class="fa fa-plus-circle"></i></button>

									</div>
									<div class="row"> 

										<input type="text" class="order-price price<?php echo $key; ?>"  value="$ <?php echo $value['order_price']; ?>">
									</div>
								</div>
							</div>
							<hr class="hr-white">

							<?php 

							if($value['order_category'] == "drinks"){
								$order_price += $value['order_price'];	
							}else{
								$order_price += $value['order_price'];	
							}

						}	
						?>
					</div>
					<div class="col-md-3 col-lg-3 col-sm-12 col-xs-12 mt-5 ">
						<hr class="hr-white">
						<div style="display: grid;">
							<table class="text-center">
								<tr>
									<th class="text-white">Subtotal: </th>
									<td>$ <input type="text" readonly class="order-price total-amount" value="<?php echo $order_price; ?>"></td>
								</tr>
								<tr>
									<th class="text-white">Total: </th>
									<td>$ <input type="text" name="total_price" readonly class="order-price total-amount" value="<?php echo $order_price; ?>"></td>
								</tr>
							</table>
						</div>
						<div class="row leftsidecontentmiddle">
							<a href="<?php echo base_url('order/checkout'); ?>" class="btn btn-block btn-default btn-w"><i class="fas fa-left-arrow"></i>CHECKOUT</a>
							<a href="<?php echo base_url('order/'); ?>" class="btn btn-block btn-default btn-w">ADD MORE </a>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div> -->
	<script type="text/javascript">

		function plus(ele,id){

			var count =   $(ele).parents(".row").find("#"+id).val();
			var updatedCount = parseInt(count)+parseInt(1);
			$(ele).parents(".row").find("#"+id).val(updatedCount);
			$("#qty"+id).val(updatedCount);
			var price = $(ele).attr('data-price')*updatedCount;
			$(".price"+id).val("$"+price);
			var totalamount = $(".total-amount").val();
			var totalprice = parseFloat(totalamount)+parseFloat($(ele).attr('data-price'));
			$(".total-amount").val(totalprice);

		}

		function minus(ele,id){

			var count =   $(ele).parents(".row").find("#"+id).val();
			if(count<=1){
				return false;
			}else{
				var updatedCount = parseInt(count)-parseInt(1);
				$(ele).parents(".row").find("#"+id).val(updatedCount);
				var price = $(ele).attr('data-price')*updatedCount;
				$(".price"+id).val("$"+price);
				var totalamount = $(".total-amount").val();
				var totalprice = parseFloat(totalamount)-parseFloat($(ele).attr('data-price'));
				$(".total-amount").val(totalprice);
			}

		}

		$(document).ready(function() {
			var click = 1;

			$('#order-data').on('submit',function(e)
			{
				e.preventDefault();
				$.ajax({
					method:'post',
					url:'<?php echo base_url('order/combine_data');?>',
					data:new FormData(this),
					dataType:'json',
        contentType: false,       // The content type used when sending data to the server.
        cache: false,             // To unable request pages to be cached
        processData:false,
        success:function(data)
        {


        },


    });

			});



		});
	</script>